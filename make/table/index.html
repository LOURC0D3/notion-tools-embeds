<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <title>Notion Tools - ÎÖ∏ÏÖòÌà¥Ï¶à</title>
    <link rel="stylesheet" href="../modal.css">
    <script src="table.js"></script>
    <script src="../module.js"></script>
    <style>
        .black {
            background-color: rgb(47, 52, 55);
            color: #ffffff;
        }

        .black table {
            border: 1px solid rgb(77, 81, 83);
        }

        .black td {
            border: 1px solid rgb(77, 81, 83);
            color: #ffffff;
        }

        .black .table_column {
            color: rgba(255, 255, 255, 0.6)
        }

        .white {
            background-color: #ffffff;
        }

        table {
            box-sizing: border-box;
            width: 100%;
            /* border: 1px solid rgba(0, 0, 0, 0.3); */
            /* border-top: 1px solid rgb(223, 223, 222); */
            /* box-shadow: white -3px 0px 0px, rgb(223, 223, 222) 0px 1px 0px; */
            line-height: 1.5;
            border-collapse: collapse;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
            -webkit-font-smoothing: auto;
        }

        td {
            /* border: 1px solid rgba(0, 0, 0, 0.3); */
            border: 1px solid rgba(55, 53, 47, 0.09);
            box-sizing: border-box;
            padding: 5px 10px;
            height: 32px;
            font-size: 16px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .table_column {
            color: rgba(55, 53, 47, 0.6);
        }
    </style>
</head>

<body>
    <div id="modal" onclick="$(this).removeClass(`modal_show`)">
        <div class="modal_text"></div>
    </div>

    <div class="divver" style="align-items: flex-start;">
        <div id="embed">
            <div class="input_line">
                <textarea id="table" placeholder="ÎèÑÏõÄÎßêÏùÑ Ï∞∏Í≥†ÌïòÏó¨ ÌÖåÏù¥Î∏îÏùÑ ÏûëÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî."></textarea>
            </div>
            <div class="input_line">
                <input type="button" class="input_theme_white" id="input_theme" value="üåû Î∞ùÏùÄ Î∞∞Í≤Ω"
                    style="margin-right: 10px;">
            </div>

            <div class="input_line">
                <div class="box" id="table-preview">
                </div>
            </div>

            <div class="output">
                <input type="text" id="output_link" class="output_link" placeholder="" readonly>
                <input type="button" value="Î≥µÏÇ¨ÌïòÍ∏∞" class="output_copy" onclick="linkCopy()">
            </div>
        </div>
    </div>

    <script>
        let theme_color = 'white';
        $("#input_theme").click(function () {
            if (theme_color == "white") {
                theme_color = "black";
                make_table()
                $('.box').css('background-color', "rgb(47, 52, 55)")
                $('.box').css('color', "#ffffff")
                $(this).addClass("input_theme_black")
                $(this).removeClass("input_theme_white")
                $(this).val("üåú Ïñ¥ÎëêÏö¥ Î∞∞Í≤Ω")

            } else {
                theme_color = "white";
                make_table()
                $('.box').css('background-color', "#ffffff")
                $('.box').css('color', "#000000")
                $(this).addClass("input_theme_white")
                $(this).removeClass("input_theme_black")
                $(this).val("üåû Î∞ùÏùÄ Î∞∞Í≤Ω")
            }
        })

        const make_table = () => {
            if ($('#table').val()) {
                let table_html = get_table($('#table').val())
                if (table_html) {
                    document.getElementById('table-preview').innerHTML = `<div class="${theme_color}" id="main">${table_html}</div>`
                    $('#output_link').val(`https://embed.notion-tools.com/block/table/?t=${theme_color}&tb=${encodeURIComponent($('#table').val())}`)
                } else {
                    document.getElementById('table-preview').innerHTML = "ÌÖåÏù¥Î∏îÏù¥ ÌòïÏãùÏóê ÎßûÏßÄ ÏïäÏäµÎãàÎã§."
                    $('#output_link').val("")
                }
            } else {
                document.getElementById('table-preview').innerHTML = ""
                $('#output_link').val("")
            }
        }

        let timer;
        document.querySelector('#table').addEventListener('input', function (e) {
            if (timer) {
                clearTimeout(timer);
            }
            timer = setTimeout(make_table, 500);
        });

        const linkCopy = () => {
            if ($("#output_link").val() == "") {
                modal("ÌÖåÏù¥Î∏îÏùÑ Î®ºÏ†Ä ÏôÑÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî", "bad")
            } else {
                copylink()
                modal("ÎßÅÌÅ¨ Î≥µÏÇ¨ ÏôÑÎ£å", "good")
                make_embed($("#output_link").val())
            }
        }
    </script>

</body>

</html>
